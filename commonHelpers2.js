import{f as b,h as E,r as t,i as u,j as P,k as A,g as m,c as p,l as S,m as C,n as T,o as w,p as f,t as k,u as I,v as _,w as v,x as M,y as q,q as x}from"./assets/subscription-7ee22c5c.js";import{b as F,S as H,P as B}from"./assets/vendor-4f126749.js";b().then(s=>{let a=E(s.slice(0,2));t.discountCards.innerHTML=a,u()}).catch;P().then(s=>{let a=A(s.slice(0,5));t.popularCards.innerHTML=a,u()}).catch;const i=m(p.CART_KEY);async function g(s){const{target:a}=s,n=a.closest(".cards__button");if(!n)return;const{id:c}=n.closest(".cards__item").dataset,e=await S(c);if(i.some(({_id:r})=>c===r))return;i.push(e);const d=document.querySelector(".header__menu-link-quantity");d.textContent=i.length,localStorage.setItem(p.CART_KEY,JSON.stringify(i)),i.some(({_id:r})=>c===r)&&(n.innerHTML=`<svg class="icon-checked"><use href="${C}#icon-check"></use></svg>`)}async function h(s){s.preventDefault();const{target:a}=s,n=a.closest(".cards__button"),c=a.closest(".cards__link");if(n||!c)return;const{id:e}=c.closest(".cards__item").dataset,l=await S(e);F.create(T(l),{onShow:o=>{const r=o.element().querySelector(".modal__item"),y=r.querySelector(".cards__button");r.addEventListener("click",g),m(p.CART_KEY).find(({_id:L})=>L===e)&&(y.innerHTML=`<svg class="icon-checked"><use href="${C}#icon-check"></use></svg>`),u(),o.element().querySelector(".modal__item-close").onclick=o.close}}).show()}w().then(s=>{let a=s.map(e=>f(e));localStorage.setItem("filter",k);let n=a.map(e=>`<option value="${e}">${f(e)}</option>`).join(""),c="<option  selected  >Show all</option>";t.productsFiltersSelect.innerHTML=n+c,new H({select:t.productsFiltersSelect,showSearch:!1})}).catch;I().then(s=>{let a=_(s.results);t.productsCards.innerHTML=a,u()}).catch();t.productsFiltersSelect.addEventListener("change",v);t.btnSubmit.addEventListener("submit",M);t.productsFiltersSelect.addEventListener("change",v);const D=t.pagination,N={totalItems:100,itemsPerPage:6,visiblePages:3,page:1,centerAlign:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},$=new B(D,N);$.on("beforeMove",s=>{const a=s.page,n=t.productsFiltersSelect.options[t.productsFiltersSelect.selectedIndex];let c=localStorage.getItem("filter"),e=c?JSON.parse(c):{};const l=n.textContent!=="Show all"?n.textContent:null;e.category=l;let d=k;e.page=a,localStorage.setItem("filter",JSON.stringify(e)),e.keyword===null&&e.category===null&&q(a,e.limit).then(o=>{let r=_(o.results);console.log(e.page),localStorage.setItem("filter",d),t.productsCards.innerHTML=r}).catch(o=>{console.error(o)})});t.productsCards.addEventListener("click",s=>s.preventDefault());t.productsCards.addEventListener("click",g);t.popularCards.addEventListener("click",g);t.discountCards.addEventListener("click",g);const K=m(p.CART_KEY);x(K);t.productsCards.addEventListener("click",h);t.popularCards.addEventListener("click",h);t.discountCards.addEventListener("click",h);
//# sourceMappingURL=commonHelpers2.js.map
