import{f as P,h as T,r as e,i as S,j as w,k as M,g as f,c as i,l as A,m as h,n as I,s as L,o as H,p as y,t as k,u as x,v as b,w as E,x as R,y as q,q as $}from"./assets/subscription-c04da169.js";import{b as D,S as F,P as K}from"./assets/vendor-4f126749.js";P().then(s=>{let a=T(s.slice(0,2));e.discountCards.innerHTML=a,S()}).catch;w().then(s=>{let a=M(s.slice(0,5));e.popularCards.innerHTML=a,S()}).catch;const g=f(i.CART_KEY);async function C(s){const{target:a}=s,c=a.closest(".cards__button");if(!c)return;const{id:n}=c.closest(".cards__item").dataset,t=await A(n);if(g.some(({_id:l})=>n===l))return;g.push(t);const m=document.querySelector(".header__menu-link-quantity");m.textContent=g.length,localStorage.setItem(i.CART_KEY,JSON.stringify(g)),g.some(({_id:l})=>n===l)&&(c.innerHTML=`<svg class="icon-checked"><use href="${h}#icon-check"></use></svg>`)}async function v(s){s.preventDefault();const{target:a}=s,c=a.closest(".cards__button"),n=a.closest(".cards__link");if(c||!n)return;const{id:t}=n.closest(".cards__item").dataset,d=await A(t);D.create(I(d),{onShow:r=>{const u=r.element().querySelector(".modal__item").querySelector(".cards__button");f(i.CART_KEY).find(({_id:o})=>o===t)?u.innerHTML=`Remove from <svg class="icon__cart" width="18" height="18"><use href="${h}#icon-cart"></use></svg>`:u.innerHTML=`Add to <svg class="icon__cart" width="18" height="18"><use href="${h}#icon-cart"></use></svg>`,u.addEventListener("click",()=>{const o=f(i.CART_KEY);if(o.some(({_id:p})=>t===p)){const p=o.findIndex(({_id:_})=>_===t);p!==-1&&o.splice(p,1),L(o,i.CART_KEY),u.innerHTML=`Add to <svg class="icon__cart" width="18" height="18"><use href="${h}#icon-cart"></use></svg>`}else{if(o.some(({_id:_})=>t===_))return;o.push(d),L(o,i.CART_KEY),u.innerHTML=`Remove from <svg class="icon__cart" width="18" height="18"><use href="${h}#icon-cart"></use></svg>`}}),S(),r.element().querySelector(".modal__item-close").onclick=r.close}}).show()}H().then(s=>{let a=s.map(t=>y(t));localStorage.setItem("filter",k);let c=a.map(t=>`<option value="${t}">${y(t)}</option>`).join(""),n="<option  selected  >Show all</option>";e.productsFiltersSelect.innerHTML=c+n,new F({select:e.productsFiltersSelect,showSearch:!1})}).catch;x().then(s=>{let a=b(s.results);e.productsCards.innerHTML=a,S()}).catch();e.productsFiltersSelect.addEventListener("change",E);e.btnSubmit.addEventListener("submit",R);e.productsFiltersSelect.addEventListener("change",E);const Y=e.pagination,B={totalItems:100,itemsPerPage:6,visiblePages:3,page:1,centerAlign:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},N=new K(Y,B);N.on("beforeMove",s=>{const a=s.page,c=e.productsFiltersSelect.options[e.productsFiltersSelect.selectedIndex];let n=localStorage.getItem("filter"),t=n?JSON.parse(n):{};const d=c.textContent!=="Show all"?c.textContent:null;t.category=d;let m=k;t.page=a,localStorage.setItem("filter",JSON.stringify(t)),t.keyword===null&&t.category===null&&q(a,t.limit).then(r=>{let l=b(r.results);console.log(t.page),localStorage.setItem("filter",m),e.productsCards.innerHTML=l}).catch(r=>{console.error(r)})});e.productsCards.addEventListener("click",s=>s.preventDefault());e.productsCards.addEventListener("click",C);e.popularCards.addEventListener("click",C);e.discountCards.addEventListener("click",C);const O=f(i.CART_KEY);$(O);e.productsCards.addEventListener("click",v);e.popularCards.addEventListener("click",v);e.discountCards.addEventListener("click",v);
//# sourceMappingURL=commonHelpers2.js.map
