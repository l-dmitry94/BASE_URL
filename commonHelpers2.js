import{f as P,h as w,r as t,i as C,j as T,k as M,g as _,c as r,l as y,m as I,n as S,s as x,o as q,p as L,t as b,u as H,v as E,w as k,x as D,y as F,q as B}from"./assets/subscription-ebc37568.js";import{b as R,S as $,P as K}from"./assets/vendor-4f126749.js";P().then(s=>{let a=w(s.slice(0,2));t.discountCards.innerHTML=a,C()}).catch;T().then(s=>{let a=M(s.slice(0,5));t.popularCards.innerHTML=a,C()}).catch;const h=_(r.CART_KEY);async function m(s){const{target:a}=s,c=a.closest(".cards__button");if(!c)return;const{id:n}=c.closest(".cards__item").dataset,e=await y(n);if(h.some(({_id:o})=>n===o))return;h.push(e);const l=document.querySelector(".header__menu-link-quantity");l.textContent=h.length,localStorage.setItem(r.CART_KEY,JSON.stringify(h))}async function v(s){s.preventDefault();const{target:a}=s,c=a.closest(".cards__button"),n=a.closest(".cards__link");if(c||!n)return;const{id:e}=n.closest(".cards__item").dataset,i=await y(e);R.create(I(i),{onShow:o=>{const d=o.element().querySelector(".modal__item"),u=d.querySelector(".cards__button"),p=_(r.CART_KEY),f=p.find(({_id:g})=>g===e);f?u.innerHTML=`Remove from <svg class="icon__cart" width="18" height="18"><use href="${S}#icon-cart"></use></svg>`:u.innerHTML=`Add to <svg class="icon__cart" width="18" height="18"><use href="${S}#icon-cart"></use></svg>`,f?u.addEventListener("click",()=>{if(f){const g=p.findIndex(({_id:A})=>A===e);g!==-1&&p.splice(g,1),x(p,r.CART_KEY),u.innerHTML=`Add to <svg class="icon__cart" width="18" height="18"><use href="${S}#icon-cart"></use></svg>`}}):d.addEventListener("click",m),o.element().querySelector(".modal__item-close").onclick=o.close}}).show()}q().then(s=>{let a=s.map(e=>L(e));localStorage.setItem("filter",b);let c=a.map(e=>`<option value="${e}">${L(e)}</option>`).join(""),n="<option  selected  >Show all</option>";t.productsFiltersSelect.innerHTML=c+n,new $({select:t.productsFiltersSelect,showSearch:!1})}).catch;H().then(s=>{let a=E(s.results);t.productsCards.innerHTML=a,C()}).catch();t.productsFiltersSelect.addEventListener("change",k);t.btnSubmit.addEventListener("submit",D);t.productsFiltersSelect.addEventListener("change",k);const N=t.pagination,Y={totalItems:100,itemsPerPage:6,visiblePages:3,page:1,centerAlign:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},O=new K(N,Y);O.on("beforeMove",s=>{const a=s.page,c=t.productsFiltersSelect.options[t.productsFiltersSelect.selectedIndex];let n=localStorage.getItem("filter"),e=n?JSON.parse(n):{};const i=c.textContent!=="Show all"?c.textContent:null;e.category=i;let l=b;e.page=a,localStorage.setItem("filter",JSON.stringify(e)),e.keyword===null&&e.category===null&&F(a,e.limit).then(o=>{let d=E(o.results);console.log(e.page),localStorage.setItem("filter",l),t.productsCards.innerHTML=d}).catch(o=>{console.error(o)})});t.productsCards.addEventListener("click",s=>s.preventDefault());t.productsCards.addEventListener("click",m);t.popularCards.addEventListener("click",m);t.discountCards.addEventListener("click",m);const J=_(r.CART_KEY);B(J);t.productsCards.addEventListener("click",v);t.popularCards.addEventListener("click",v);t.discountCards.addEventListener("click",v);
//# sourceMappingURL=commonHelpers2.js.map
