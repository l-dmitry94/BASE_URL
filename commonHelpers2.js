import{f as v,h as L,r as t,i as u,j as b,k as _,g as f,c as p,l as C,m as P,n as E,o as A,p as m,t as S,u as w,v as k,w as y,x as I,y as M,q as T}from"./assets/subscription-eccfd341.js";import{b as x,S as F,P as q}from"./assets/vendor-4f126749.js";v().then(e=>{let a=L(e.slice(0,2));t.discountCards.innerHTML=a,u()}).catch;b().then(e=>{let a=_(e.slice(0,5));t.popularCards.innerHTML=a,u()}).catch;const i=f(p.CART_KEY);async function g(e){const{target:a}=e,c=a.closest(".cards__button");if(!c)return;const{id:n}=c.closest(".cards__item").dataset,s=await C(n);if(i.some(({_id:r})=>n===r))return;i.push(s);const d=document.querySelector(".header__menu-link-quantity");d.textContent=i.length,localStorage.setItem(p.CART_KEY,JSON.stringify(i)),i.some(({_id:r})=>n===r)&&(c.innerHTML=`<svg class="icon-checked"><use href="${P}#icon-check"></use></svg>`)}async function h(e){e.preventDefault();const{target:a}=e,c=a.closest(".cards__button"),n=a.closest(".cards__link");if(c||!n)return;const{id:s}=n.closest(".cards__item").dataset,l=await C(s);x.create(E(l),{onShow:o=>{o.element().querySelector(".modal__item-close").onclick=o.close}}).show()}A().then(e=>{let a=e.map(s=>m(s));localStorage.setItem("filter",S);let c=a.map(s=>`<option value="${s}">${m(s)}</option>`).join(""),n="<option  selected  >Show all</option>";t.productsFiltersSelect.innerHTML=c+n,new F({select:t.productsFiltersSelect,showSearch:!1})}).catch;w().then(e=>{let a=k(e.results);t.productsCards.innerHTML=a,u()}).catch();t.productsFiltersSelect.addEventListener("change",y);t.btnSubmit.addEventListener("submit",I);t.productsFiltersSelect.addEventListener("change",y);const D=t.pagination,H={totalItems:100,itemsPerPage:6,visiblePages:3,page:1,centerAlign:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},B=new q(D,H);B.on("beforeMove",e=>{const a=e.page,c=t.productsFiltersSelect.options[t.productsFiltersSelect.selectedIndex];let n=localStorage.getItem("filter"),s=n?JSON.parse(n):{};const l=c.textContent!=="Show all"?c.textContent:null;s.category=l;let d=S;s.page=a,localStorage.setItem("filter",JSON.stringify(s)),s.keyword===null&&s.category===null&&M(a,s.limit).then(o=>{let r=k(o.results);console.log(s.page),localStorage.setItem("filter",d),t.productsCards.innerHTML=r}).catch(o=>{console.error(o)})});t.productsCards.addEventListener("click",e=>e.preventDefault());t.productsCards.addEventListener("click",g);t.popularCards.addEventListener("click",g);t.discountCards.addEventListener("click",g);const N=f(p.CART_KEY);T(N);t.productsCards.addEventListener("click",h);t.popularCards.addEventListener("click",h);t.discountCards.addEventListener("click",h);
//# sourceMappingURL=commonHelpers2.js.map
