{"version":3,"file":"commonHelpers.js","sources":["../src/js/cart/cart.js","../src/js/cart/delete-from-cart.js","../src/js/cart/general-sum.js","../src/js/cart/delete-product.js","../src/cart.js"],"sourcesContent":["import { common } from '../common/common';\nimport { quantityProduct } from '../helpers/helpers';\nimport { createMarkupCartList, createMarkupEmptyCart } from '../services/markup';\nimport { refs } from '../services/refs';\nimport { getData } from '../services/storage';\n\nexport async function handleCart() {\n    const cartArr = getData(common.CART_KEY);\n    \n    quantityProduct(cartArr);\n\n    if (!cartArr.length) {\n        refs.cardWrapper.innerHTML = createMarkupEmptyCart();\n        return\n    }\n\n    refs.cartProducts.insertAdjacentHTML(\"beforeend\", createMarkupCartList(cartArr))\n\n}\n\n\n","import { common } from \"../common/common\";\nimport { quantityProduct } from \"../helpers/helpers\";\nimport { createMarkupEmptyCart } from \"../services/markup\";\nimport { refs } from \"../services/refs\";\n\nexport async function handleDeleteAllFromCart() {\n\n    localStorage.removeItem(common.CART_KEY)\n    \n    refs.cardWrapper.innerHTML = createMarkupEmptyCart();\n\n    refs.cartQuantity.forEach(item => item.textContent = 0)\n\n} ","import { common } from \"../common/common\";\nimport { refs } from \"../services/refs\";\nimport { getData } from \"../services/storage\";\n\nexport async function generalSum() {\n    const cartArr = getData(common.CART_KEY);\n    \n    const totalSum = cartArr.reduce((total, {price}) => {\n        return total + price;\n    }, 0)\n\n    refs.totalPrice.textContent = `$${Number(totalSum.toFixed(2))}`\n}","import { common } from \"../common/common\";\nimport { quantityProduct } from \"../helpers/helpers\";\nimport { createMarkupCartList, createMarkupEmptyCart } from \"../services/markup\";\nimport { refs } from \"../services/refs\";\nimport { getData, saveData } from \"../services/storage\";\nimport { generalSum } from \"./general-sum\";\n\nexport async function handleDeleteProduct(event) {\n    const { target } = event;\n\n    const deleteBtn = target.closest(\".cart__item-close\");\n\n    if(!deleteBtn) {\n        return\n    }\n\n    const {id} = deleteBtn.closest(\".cart__products-item\").dataset;\n\n    const cartArr = getData(common.CART_KEY);\n\n    console.log(cartArr)\n\n    const findProductIndex = cartArr.findIndex(({_id}) => _id === id)\n\n    console.log(findProductIndex)\n\n    const deleteProduct = cartArr.splice(findProductIndex, 1)\n\n    saveData(cartArr, common.CART_KEY)\n\n    refs.cartProducts.innerHTML = createMarkupCartList(cartArr)\n\n    generalSum();\n\n    quantityProduct(cartArr);\n\n    if(!cartArr.length) {\n        refs.cardWrapper.innerHTML = createMarkupEmptyCart();\n    }\n\n}\n","import { handleCart } from \"./js/cart/cart\";\nimport { handleDeleteAllFromCart } from \"./js/cart/delete-from-cart\";\nimport { handleDeleteProduct } from \"./js/cart/delete-product\";\nimport { generalSum } from \"./js/cart/general-sum\";\nimport { refs } from \"./js/services/refs\";\n\nhandleCart();\n\nrefs.deleteAllProductsFromCart.addEventListener(\"click\", handleDeleteAllFromCart);\n\ngeneralSum();\n\nrefs.cartProducts.addEventListener(\"click\", handleDeleteProduct)"],"names":["handleCart","cartArr","getData","common","quantityProduct","refs","createMarkupEmptyCart","createMarkupCartList","handleDeleteAllFromCart","item","generalSum","totalSum","total","price","handleDeleteProduct","event","target","deleteBtn","id","findProductIndex","_id","saveData"],"mappings":"8HAMO,eAAeA,GAAa,CAC/B,MAAMC,EAAUC,EAAQC,EAAO,QAAQ,EAIvC,GAFAC,EAAgBH,CAAO,EAEnB,CAACA,EAAQ,OAAQ,CACjBI,EAAK,YAAY,UAAYC,IAC7B,MACH,CAEDD,EAAK,aAAa,mBAAmB,YAAaE,EAAqBN,CAAO,CAAC,CAEnF,CCbO,eAAeO,GAA0B,CAE5C,aAAa,WAAWL,EAAO,QAAQ,EAEvCE,EAAK,YAAY,UAAYC,IAE7BD,EAAK,aAAa,QAAQI,GAAQA,EAAK,YAAc,CAAC,CAE1D,CCTO,eAAeC,GAAa,CAG/B,MAAMC,EAFUT,EAAQC,EAAO,QAAQ,EAEd,OAAO,CAACS,EAAO,CAAC,MAAAC,CAAK,IACnCD,EAAQC,EAChB,CAAC,EAEJR,EAAK,WAAW,YAAc,IAAI,OAAOM,EAAS,QAAQ,CAAC,CAAC,GAChE,CCLO,eAAeG,EAAoBC,EAAO,CAC7C,KAAM,CAAE,OAAAC,CAAQ,EAAGD,EAEbE,EAAYD,EAAO,QAAQ,mBAAmB,EAEpD,GAAG,CAACC,EACA,OAGJ,KAAM,CAAC,GAAAC,CAAE,EAAID,EAAU,QAAQ,sBAAsB,EAAE,QAEjDhB,EAAUC,EAAQC,EAAO,QAAQ,EAEvC,QAAQ,IAAIF,CAAO,EAEnB,MAAMkB,EAAmBlB,EAAQ,UAAU,CAAC,CAAC,IAAAmB,CAAG,IAAMA,IAAQF,CAAE,EAEhE,QAAQ,IAAIC,CAAgB,EAENlB,EAAQ,OAAOkB,EAAkB,CAAC,EAExDE,EAASpB,EAASE,EAAO,QAAQ,EAEjCE,EAAK,aAAa,UAAYE,EAAqBN,CAAO,EAE1DS,IAEAN,EAAgBH,CAAO,EAEnBA,EAAQ,SACRI,EAAK,YAAY,UAAYC,IAGrC,CClCAN,IAEAK,EAAK,0BAA0B,iBAAiB,QAASG,CAAuB,EAEhFE,IAEAL,EAAK,aAAa,iBAAiB,QAASS,CAAmB"}